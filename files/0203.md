## 🧠 Python 集合 Set：去重、交并差运算全攻略


### 一、集合的基本概念

#### ✅ 什么是集合（Set）？

- 是**无序、元素唯一**的数据容器
- 元素必须是**可哈希（hashable）类型**：比如字符串、数字、元组

#### ✅ 创建方式：

```python
s = {1, 2, 3}
s2 = set([1, 2, 3, 4])
```

#### ❌ 创建空集合：

```python
s = set()  # 注意：不能写成 s = {}
```

---

### 二、集合的核心用途：**去重**

```python
data = [1, 2, 2, 3, 4, 4, 5]
unique = list(set(data))  # [1, 2, 3, 4, 5]
```

📌 特别适合在读取大规模数据、去除重复值时使用。

---

### 三、集合运算（交集、并集、差集、对称差集）

```python
a = {1, 2, 3, 4}
b = {3, 4, 5, 6}
```

| 操作 | 代码 | 结果 |
|------|------|------|
| **并集**（∪）| `a | b` 或 `a.union(b)` | `{1, 2, 3, 4, 5, 6}` |
| **交集**（∩）| `a & b` 或 `a.intersection(b)` | `{3, 4}` |
| **差集**（-）| `a - b` 或 `a.difference(b)` | `{1, 2}`（只在 a 中）|
| **对称差集**（异或）| `a ^ b` 或 `a.symmetric_difference(b)` | `{1, 2, 5, 6}` |

---

### 四、集合的判断与包含关系

```python
a.issubset(b)     # a 是 b 的子集？
a.issuperset(b)   # a 是 b 的超集？
a.isdisjoint(b)   # a 和 b 没有交集？
```

---

### 五、集合的添加与删除元素

```python
s.add(10)       # 添加单个元素
s.update([11, 12])  # 添加多个元素（合并另一个序列）

s.remove(10)    # 删除（如果不存在就报错）
s.discard(99)   # 删除（如果不存在也不会报错）

s.pop()         # 随机删除一个元素（因为集合无序）
s.clear()       # 清空集合
```

---

### 六、集合的遍历

```python
for item in s:
    print(item)
```

虽然无序，但你可以用 `sorted(s)` 让它临时排序：

```python
for i in sorted(s):
    ...
```

---

### 七、集合去重 + 排序技巧组合技：

```python
data = [3, 1, 2, 2, 3, 4]
result = sorted(set(data))
# [1, 2, 3, 4]
```

---

### 八、frozenset：不可变集合（可做字典键）

```python
fs = frozenset([1, 2, 3])
# fs.add(4) ❌ 报错，不能修改
```

常用于需要“可哈希集合”的场景，比如用作字典的 key。

---

### 九、实战场景举例

#### 1. 查找两个列表的公共好友：

```python
a = ["Tom", "Jerry", "Spike"]
b = ["Jerry", "Spike", "Tyke"]

common = set(a) & set(b)
print(common)  # {'Jerry', 'Spike'}
```

#### 2. 快速去重统计关键词：

```python
words = ["apple", "banana", "apple", "orange"]
print(len(set(words)))  # 3 个唯一词
```

#### 3. 一键判断两个集合是否完全相同（无序比较）：

```python
set(a) == set(b)
```

---

### 十、集合 vs 列表 vs 元组

| 特性        | 列表 list | 元组 tuple | 集合 set |
|-------------|------------|-------------|-----------|
| 是否有序    | ✅         | ✅          | ❌（3.6+顺序保持）|
| 是否可变    | ✅         | ❌          | ✅         |
| 是否可重复  | ✅         | ✅          | ❌         |
| 是否支持切片| ✅         | ✅          | ❌         |
| 适合场景    | 普通数据集合 | 固定数据结构 | 唯一性判断、集合运算 |

---

### 总结：

- 集合是最简单高效的去重方法；
- 支持数学集合操作（交、并、差、对称差）；
- 遍历无序，但可以排序使用；
- 想比较两个列表是否“内容一样”直接转成 `set`；
- `frozenset` 可以用作字典的键，适合需要不可变容器的场景。
