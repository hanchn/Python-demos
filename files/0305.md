# ğŸ§  åå‡½æ•° partial


---

## ä¸€ã€ä»€ä¹ˆæ˜¯åå‡½æ•°ï¼Ÿ

åå‡½æ•°ï¼ˆPartial Functionï¼‰æ˜¯ä¸€ç§å‡½æ•°å˜ä½“ï¼Œç”¨äºï¼š

> å›ºå®šåŸå‡½æ•°çš„**éƒ¨åˆ†å‚æ•°**ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ã€‚

æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯å‡½æ•°çš„\*\*â€œå‚æ•°é¢„è®¾â€å·¥å…·\*\*ï¼Œå¯ç”¨äºç®€åŒ–è°ƒç”¨åœºæ™¯ä¸­åå¤ä¼ åŒæ ·å‚æ•°çš„é—®é¢˜ã€‚

---

## äºŒã€å¯¼å…¥æ–¹å¼

```python
from functools import partial
```

---

## ä¸‰ã€åŸºæœ¬è¯­æ³•

```python
partial(func, *args, **kwargs)
```

* `func`ï¼šåŸå§‹å‡½æ•°
* `args`ï¼šé¢„è®¾çš„å‰ç½®ä½ç½®å‚æ•°
* `kwargs`ï¼šé¢„è®¾çš„å…³é”®å­—å‚æ•°

è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¯¹è±¡ï¼Œå…¶è¡Œä¸ºç±»ä¼¼äºå¯¹ `func` æŸäº›å‚æ•°æå‰ç»‘å®šåçš„ç®€åŒ–ç‰ˆæœ¬ã€‚

---

## å››ã€åŸºç¡€ç¤ºä¾‹

```python
from functools import partial

def power(base, exponent):
    return base ** exponent

square = partial(power, exponent=2)
cube = partial(power, exponent=3)

print(square(4))  # è¾“å‡º 16
print(cube(2))    # è¾“å‡º 8
```

è¯´æ˜ï¼š`square(x)` ç›¸å½“äº `power(x, 2)`ï¼›`cube(x)` ç›¸å½“äº `power(x, 3)`

---

## äº”ã€ä¸ lambda çš„å¯¹æ¯”

```python
# partial
from functools import partial
int_base2 = partial(int, base=2)

# lambda ç­‰æ•ˆ
int_base2_lambda = lambda s: int(s, base=2)

print(int_base2("1001"))         # 9
print(int_base2_lambda("1001"))  # 9
```

### âœ… ä¼˜åŠ£åˆ†æï¼š

| ç‰¹æ€§                | `partial`                       | `lambda`     |
| ----------------- | ------------------------------- | ------------ |
| å¯è¯»æ€§               | âœ… æ˜ç¡®ç»‘å®šå‚æ•°                        | âŒ å¤šå‚æ•°æ—¶å¯è¯»æ€§ä¸‹é™  |
| æ”¯æŒ `__name__` ç­‰å±æ€§ | âœ… `functools.update_wrapper` æ”¯æŒ | âŒ çº¯åŒ¿åå‡½æ•°ï¼Œéš¾ä»¥è¿½è¸ª |
| æ€§èƒ½                | è¾ƒå¿«ï¼Œåº•å±‚ä¼˜åŒ–                         | è§£é‡Šæ‰§è¡Œï¼Œæ€§èƒ½ç•¥ä½    |
| æ”¯æŒ introspect     | âœ…                               | âŒ            |

---

## å…­ã€é€‚åˆ partial çš„å…¸å‹åœºæ™¯

### 1. é…åˆ GUI / å›è°ƒ

```python
import tkinter as tk
from functools import partial

def handle_click(action):
    print("æŒ‰é’®åŠ¨ä½œ:", action)

root = tk.Tk()
btn = tk.Button(root, text="ç¡®è®¤", command=partial(handle_click, "confirm"))
btn.pack()
root.mainloop()
```

è¯´æ˜ï¼špartial å¸®æˆ‘ä»¬æå‰ç»‘å®š `"confirm"` ä½œä¸ºå‚æ•°ï¼Œé¿å…ä½¿ç”¨ lambda æˆ–æ–°å‡½æ•°ã€‚

---

### 2. API è°ƒåº¦/ç®€åŒ–å‚æ•°ç»‘å®š

```python
def api_request(method, url, data=None):
    # æ¨¡æ‹Ÿè¯·æ±‚é€»è¾‘
    print(method, url, data)

post_api = partial(api_request, "POST")
post_api("/users", data={"name": "Tom"})
```

---

### 3. ä½¿ç”¨å†…å»ºå‡½æ•°å˜ç§ï¼ˆå¸¸è§äº intã€open ç­‰ï¼‰

```python
int2 = partial(int, base=2)
print(int2("1010"))  # è¾“å‡º 10
```

---

## ä¸ƒã€partial çš„å‡½æ•°å±æ€§

åå‡½æ•°è¿”å›çš„å¯¹è±¡ä»ç„¶æ˜¯å‡½æ•°å¯¹è±¡ï¼Œå¹¶ä¿ç•™ä»¥ä¸‹å±æ€§ï¼š

```python
f = partial(pow, exponent=2)

print(f.func)      # åŸå§‹å‡½æ•°ï¼špow
print(f.args)      # ä½ç½®å‚æ•°é¢„è®¾
print(f.keywords)  # å…³é”®å­—å‚æ•°é¢„è®¾
```

---

## å…«ã€ç»“åˆé«˜é˜¶å‡½æ•°ä½¿ç”¨

```python
from functools import partial

def multiply(x, y): return x * y
double = partial(multiply, 2)

nums = [1, 2, 3, 4]
result = list(map(double, nums))  # [2, 4, 6, 8]
```

---

## ä¹ã€partial ä¸ functools.partialmethodï¼ˆç±»æ–¹æ³•åœºæ™¯ï¼‰

```python
from functools import partialmethod

class MyClass:
    def greet(self, name, message):
        print(f"{message}, {name}")

    hi = partialmethod(greet, message="Hi")
    hello = partialmethod(greet, message="Hello")

obj = MyClass()
obj.hi("Tom")     # è¾“å‡º Hi, Tom
obj.hello("Jerry")# è¾“å‡º Hello, Jerry
```

---

## ğŸ”Ÿ æ€»ç»“ä¸æœ€ä½³å®è·µ

| åº”ç”¨å»ºè®®                     | æ¨èä½¿ç”¨ partial        |
| ------------------------ | ------------------- |
| é‡å¤è°ƒç”¨å›ºå®šéƒ¨åˆ†å‚æ•°               | âœ… æ¯”å®šä¹‰å¤šä¸ª lambda æ›´æ¸…æ™°  |
| å¤šå¤„ç»‘å®šå¸¸ç”¨å‚æ•°ï¼ˆå¦‚é»˜è®¤ APIã€æ–‡ä»¶æ‰“å¼€æ¨¡å¼ï¼‰ | âœ… å¯ä»¥ç®€åŒ–è°ƒç”¨é€»è¾‘          |
| é«˜é˜¶å‡½æ•°ç»„åˆå¤„ç†                 | âœ… ä¸ map/filter æ­é…æµç•… |
| åŠ¨æ€å‡½æ•°æ³¨å†Œè¡¨ã€å›è°ƒç»‘å®š             | âœ… é€‚åˆäº‹ä»¶é©±åŠ¨å’Œç­–ç•¥æ¨¡å¼       |

